# Lecture 4
심플하지 않은 수요추정 모델 중 가장 많이 쓰이는건 4단계 수요 추정 방법(발생-분배-모달스플릿-어사인먼트)

# Trip Generation
색깔로 되어있는 Zone에서 나가는양, 들어오는양 이걸 트립제너레이션이라고 함
1단계부터 4단계까지 해야할건 매트릭스 작성하는거

- Origin Sum 오썸, 모든 나가는 양, 발생량, 매트릭스 가로의합
- Destination Sum 디썸, 도착의 합, 어트랙션, 도착량

2단계 는 특정지역I에서 어디로가는거 추정
3단계 I에서 J로가는거 어떠한 수단으로 가는지
4단계 특정한 도로 네트워크에 통행량이 얼마나 지나가는지

## OD vs PA(production-attraction)
OD는 출발도착
PA는 집이 문제, 프로덕션은 발생, 어트랙션은 도착
집은 무조건 프로덕션, 왜하냐면 OD는 앞뒤가 안맞을수도있어서, 100명나갔는데 90명 들어옴, 외국은 PA방식을 더 선호함

OD매트릭스와 PA매트릭스가 달라짐
PA는 실질적으로 활동하는 장소에 의해 결정됨
홈 베이스드 트립만 홈이 P가됨, NHB는 그냥 OD랑 똑같음
귀가라는 개념만 다른거임

홍대에 몇명 나갔냐 발생량, 몇명 들어왔냐 도착량
우리가 해야할 건 발생, 도착 추정하는거
목적별로 추정하는 법도 있음

통행 발생에 영향을 주는 요인이 뭔지 알아야함
크게 두가지 : 프로덕션에 영향, 어트랙션에 영향
발생량에 영향주는거 : 소득, car, 가구원수, 주거밀도, 땅값, 접근성
도착에 영향주는거 : 종사자수, 토지이용, 학생수 등

## Trip Generation
오썸과 디썸을 추정하는거
먼저 맨 마지막행열을 채우는거

- production
- attraction
- external trip ends 스쳐가는거, 강원도로가는거 그런거

오썸 == 디썸 == T(big t)
크게 3가지 방법

1. 성장인자법 Growth-factor model
2. 원단위 Trip Generation Rate (인당 얼마)
- 단순원단위 두당 얼마 (5천만 * 1.5 같은거)
- 교차 분류법
- MCA 다중교차분석
3. **회귀분석** 가장 많이씀!

### 성장인자법
T와 t : T는 미래의 통행량, t는 현재의 통행량
i와 j : i는 출발, j는 도착
F : growth factor
T = F X t
F를 어떻게 계산하냐
d는 목표연도, c는 현재연도 -> F = Pd/Pc (미래인구/현재인구)
P는 인구 I는 소득 C는 자동차보유대수

문제 : 인구가 2배 늘었다고 통행이 2배 늘어나진않음
external trip에 쓰는 경향이 있음

### 원단위법
Pp = F * mp 이니까 F = P0/m0 현재년도 총 통행량 / 현재년도 사회경제지표
Pp는 장래년도 통행발생량, mp는 장래년도 사회경제지표
원단위는 목적에 따라 쓰는게 다른데 출근은 취업자수, 등교면 거주학생수 같은거
도착하는건 출근이면 고용자수, 등교면 수용학생수, 쇼핑이면 상업시설 연상면적

미래의 변화가 크다고 하면 오차가 커짐
Zone별로 구분하지 않고 하나의 원단위를 제시하므로 존별 편차를 무시하게됨

#### Example
250차있는가구 250차없는가구
원단위는 어떻게 줬냐면 승용차가 있는 가구는 하루동안 6통행
차없으면 하루에 2.5통행
t = 250\*6 + 250\*2.5 = 2125
미래에 모든 가구원이 차를 가지게 된다면

- growth factor F는 미래차대수/현재차대수 = 500/250 = 2
  2125 * 2 = 4250 trips/day
- 원단위를 적용하면 500 * 6 = 3000 trips/day

### 회귀분석
y가 통행량 x는 통행에 영향을 미치는 x변수
하튼 내가 알고있는거임
근데 회구라인 그리고 볼록한 그래프를 덧그려줌
왜냐면 40cm일때 무게가 여러개니까 정규분포곡선을 그려주네
오차항은 평균이 0이고 분산은 시그마제곱으로 가정한 정규분포를 이룬다
LSE(최소자승법) 내가 아는 MSE랑 비슷한거임
이제 예측값을 구할 수 있음 y hat, 그냥 y는 참값
y - y hat 은 error임

### 교차분류분석
HH Size(하우스홀드 사이즈)와 Car ownership간의 표
차를 이용하면서 수입이 100만원 이하인 사람
딱 카테고리를 나눠둔거임 그냥
그 이면에는 장래에 대한 정보가 더 많아야함
장래에 대한 원다위별 인구수가 있어야함

존하고 상관없음, 사용하기 편함, 한셀당 50명이상의 표본이 필요

### MCA
아까에서 셀이없고 우리가 알고있는 원단위를 알고있다 해보자
1인가구의 평균 통행량, 차를 하나도 가지고 있지않은 사람의 평균 통행량 같은거만 알고있다해보자.
그룹별 평균만 알고있다면 전체평균을 구하고 d는 전체평균과의 차이
가장 큰 단점은 마이너스값이 막나와

## 중요한거
sigma(Oi) = sigma(Dj)
맞추는 방법이 있는데 이건 설명 흘러들음
테스트도 함 t값이 크면 폐기처분
상관계수 r^2의 계싼방법 :(SST-SSE)/SST = SSR/SST
t에대한 p밸류 테스트 f밸류 테스트 있는데 넘 어렵네