## 무엇을 하고 싶은가?
유저가 무엇을 좋아하는지  
유저가 싫어하는걸 막자  
-> 상위지표 몇가지만으로 케어할 수 있을까? 아니다.  
-> 수집해야 하는 로그의 양이 급격히 상승

## 어떻게 하고 있는가?
### 총론 : 전반적인 이야기
1. 데이터가 많다 : 메모리에 올리기 어렵다
2. 데이터 포맷이 다양하다
3. 실시간 분석이 가능해야 한다
4. 분석가가 기존 방법론대로 접근할 수 있어야 한다 : R이나 Python, SQL

Open Source & Cloud Service를 활용함

### 각론
#### 분석시스템 아키텍쳐
로그 전송 -> 로그 수집 -> 임시저장 -> 데이터 프로세싱 -> 영구저장(결과물) -> 서비스/분석

##### 로그 전송
네이티브 C++활용  
우선시 한 순서  
1. 코어 컨텐츠에 주는 영향 최소화 : 프로토콜 선택, 개별 프로세스, 큐 관리
2. 누락없는 로그전송 : 릴레이 서버, 로그 카운트 넘버링 -> 다음 페이지
3. 보편적인 사용성 : C++로 제작

server --udp--> relay --http--> aws ELB  
서비스중인 게임서버는 UDP 전송  
서비스와 상관없는 릴레이서버는 HTTP 전송

##### 로그 수집
전송 로그를 받아서 메세지 큐에 차곡차곡 쌓는 역할  
임시 저장용 DB 개념  
수집서버 : **fluentd** 활용 - 로그 수집에 최적화된 Simplified Web Server  
어떤 형식이든 받아서 어떤 형식으로든 쌓을 수 있게함  
수집서버 배포 : **docker** - aws ecs(container service)로 쉽게 관리할 수 있음, 무중단 배포 가능  
이렇게 복잡하게 하는 이유는 글로벌해서

##### 메시지 큐
**aws kinesis**라는 서비스 활용  
왜 db가 아니라 큐라면 어떤 데이터가 들어올지 모르기 때문에

##### 데이터 프로세싱 : 핵심
인데 시간이 없어서..  
- 머신러닝 : 텐서플로우  
- 실시간 집계 : 스파크 - 분산처리가 가능한 범용적 플랫폼, 스칼라로 구현

##### 영구 저장
RDB : aws rdsdldyd  
파일 스토리지 : 대부분 여기에 저장, raw data도, 비정형 데이터라 어쩔 수 없음  
- s3 : http를 이용한 파일 스토리지로 이해하면 됨
- lambda : 생 코드를 올리면 특정 이벤트/시간에 함수를 잠깐 실행시켜줌, aws의 거의 모든 이벤트를 핸들링 가능

##### 서비스/분석
대시보드 : **tableau** 태블루라는 다이나믹 대시보드 - 퀄리티 매우 좋음  
라이브 API : 게임에 실 적용하는 거 - 봇 차단, 트롤 매칭 조절 등  
비정형데이터분석 : 하이브 - aws athena, jupyter

#### 사용하는 AWS 서비스
발표자료에서 참고

## QNA
하루에 로그의 양이 대략 1TB  
머신러닝에 대한 보충설명 해주세요 : 머신러닝을 이용한 작업장 봇 탐지 세션 보시면 좋아요, 이도호 doholee@nexon.co.kr 로 메일주세요!