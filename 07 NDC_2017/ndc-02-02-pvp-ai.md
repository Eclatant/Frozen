# 던파, 시즈키 도장 포스트 모템

## 다룰 내용
**현실적**인 PVP AI 만들기  
-> 누구나 구현 가능한, 쉬운, 바로 써먹을 수 있는  
-> 대전 액션게임의 아케이드 모드 AI를 **효율적**으로 **쉽게** 만들기  
-> 머신러닝/강화학습 내용이 아님!

## 시즈키 도장
인공지능에 대한 긍정적인 피드백, 부정적인 피드백

## 발표 순서
- 던파 결투장 소개
- 시즈키 도장 세부목표 및 개발방향성
- 핵심 구현 4가지
  - 콤보
  - 무빙
  - FSM 상태정의
  - 난이도 구현, 정확도
- 마무리

## 던파 결투장
우리가 알고있는 그것  
15개의 캐릭터, 51개의 전직, 3000여개의 스킬  
콤보 시스템, 보정 시스템  
RatingPoint 매칭기반

## 목표와 개발방향성
1. 51개의 전직 모두 구현해야 함 : 복잡도가 높기 때문에 기획자가 바로 로직을 짜도록 설계, 루아 사용
2. 콤보 학습을 도와야 한다 : 많은 콤보를 쉽고 빠르게
3. 의미 있는 무빙을 해야한다 : 자기의 패턴을 플레이 하는게 아니라 유저의 공격 범위를 예측해야 함
4. RP 600, 800, 1000의 난이도 : 51개 \* 3 : 난이도는 데이터(내부 변수같은걸 말하는 듯)로만 결정되게끔

## 키스트림 기반의 콤보
콤보는 무력화 된 상태에서 순차적으로 실행되는 흐름일 뿐  
녹화를 하자! : 기획자의 콤보 키입력을 파일로 저장하는 기능  
콤보 녹화 -> 텍스트 형식 파일로 저장 -> 찍어내기

AI 로직 스크립트(루아)에서는 키스트림을 간단히 재생  
-> 조건에 따라 이러이러할 때 어떤 콤보를 실행해라  
```lua
if targetObjInfo.zPis < 50 and Battle:isSkillColltime(46) == false then
  Idle:setAction(0); -- 초급 콤보 1
```

## 위험영역 기반의 무빙
무빙 : 나는 맞지 않고 때리려는 움직임  
맞지 않으려면 -> 적의 공격영역 인지 -> 스킬 별 공격데이터 정의 -> 쿨타임에 따라 **위험 영역** on/off  
즉 스킬을 사용할 수 있다는건 이 영역만큼 위험하다, 유저 주변에 워닝 에어리어 박스  
접근 + 회피 + 위험영역 = 유저와 비슷한 움직임  
위험영역은 AI 스크립트에 이벤트로 전달

## FSM 상태 정의
1. MoveState : 위험영역 기반
2. **CheckState** : 견제를 담당하는 상태, 한대씩 툭툭 치는거, 이게 성공하면 공중 콤보로 간다던가, 다운콤보로 간다던가 하는
3. AirCombo, Down, stand etc.
4. EscapeState

## 난이도 구현 : 정확도 시스템
난이도별 AI로직을 분리하는것은 힘듬  
난이도를 **숙련도의 차이**로 바라봄 -> 같은 플레이에 대해 점점 더 정교해지는 개념  
- AI 로직은 한벌, AI 데이터는 난이도별로 관리
- 난이도 별 AI데이터는 **정확도 수치**만을 다르게 입력
- 로직에선 정확도 데이터에 따라서 이 수치가 보정되는거
> 예를 들면 거리가 150이하일 때 라는 조건에서 난이도가 낮으면 50도 됐다가 200도 됐다가, 난이도가 높으면 정확히 150에 가깝게 적용되는거

## 마치며
투사체, 설치형 스킬에 취약  
퀄리티의 차이  
그러나 간단하면서 효율적인 4가지 아이디어
